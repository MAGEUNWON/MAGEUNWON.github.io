---
layout: post
title: Python ìœ ë‹› í…ŒìŠ¤íŠ¸(Unit Test)
tags: [Python]
categories:
  - Python
date: 2023-03-06
---

# ìœ ë‹›(ë‹¨ìœ„) í…ŒìŠ¤íŠ¸ë€?

ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” íŠ¹ì • í•¨ìˆ˜ê°€ í•˜ë‚˜ì˜ ì‹œë‚˜ë¦¬ì˜¤(í•œ ë‹¨ìœ„)ì— ëŒ€í•˜ì—¬ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ì„.  
ì—¬ê¸°ì„œ ìœ ë‹›ì´ë€ ë³´í†µ í•¨ìˆ˜ ë‹¨ìœ„ë¼ê³  ìƒê°í•˜ë©´ ë¨.  
í”„ë¡œê·¸ë¨ì€ ë°ì´í„°ì™€ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¡œ êµ¬ì„±ë˜ëŠ”ë° ê° í•¨ìˆ˜ë¥¼ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸í•˜ë©´ì„œ ì „ì²´ í”„ë¡œê·¸ë¨ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ìµœì†Œí™”í•  ìˆ˜ ìˆìŒ. ê·¸ë˜ì„œ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•œ í›„ í•¨ìˆ˜ì˜ ì…ë ¥ê³¼ ì˜ˆìƒë˜ëŠ” ì¶œë ¥ì„ ë¹„êµí•¨ìœ¼ë¡œì¨ í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒ.

ë˜í•œ, ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œë„ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•¨. ë¦¬íŒ©í† ë§ì„ ìˆ˜í–‰í•˜ê¸° ì•ì„œ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ìˆë‹¤ë©´ ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ ìœ ë‹› í…ŒìŠ¤íŠ¸ì˜ í†µê³¼ ì—¬ë¶€ë¥¼ í†µí•´ ì¢€ ë” ë¹¨ë¦¬ ìˆ˜ì •ì— ë”°ë¥¸ ë¬¸ì œë“¤ì„ ì°¾ì„ ìˆ˜ ìˆìŒ.

## ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‚¬ìš©ë²•

íŒŒì´ì¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì£¼ë¡œ ë‘ ê°€ì§€ ëª¨ë“ˆì´ ì‚¬ìš©ë¨. unittest ëª¨ë“ˆì€ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ íŒŒì´ì¬ ì„¤ì¹˜ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ë¨. ì´ì™€ ë‹¬ë¦¬ pytestëŠ” ì¶”ê°€ë¡œ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ” ëª¨ë“ˆì„. pytestê°€ ì¢€ ë” ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•¨. ì°¸ê³ ë¡œ ì•„ë‚˜ì½˜ë‹¤ì—ëŠ” pytestê°€ ì´ë¯¸ í¬í•¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë”°ë¡œ ì„¤ì¹˜í•  í•„ìš”ëŠ” ì—†ìŒ. ì•„ë‚˜ì½˜ë‹¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë”°ë¡œ ì„¤ì¹˜í•´ì•¼ í•¨.

## unittest ì‚¬ìš©ë²•

ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” 3ë‹¨ê³„ì˜ ê³¼ì •ì„ ê±°ì¹¨.

- ë¨¼ì € ê²€ì‚¬í•˜ê³ ì í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •í•´ ì¤Œ.

```
import unittest

# ê²€ì‚¬í•˜ê³ ìí•˜ëŠ” í•¨ìˆ˜
def func(arg):
    retrun arg
```

- ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  í´ë˜ìŠ¤ë¥¼ ì‘ì„±

ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  í´ë˜ìŠ¤ë¥¼ ì •ì˜í•¨. ì´ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œëŠ” ì£¼ë¡œ assert ë©”ì„œë“œë¡œì¨ ê° ì‹œë‚˜ë¦¬ì˜¤ë³„ë¡œ í•¨ìˆ˜ì˜ ì •ìƒ ì‘ë™ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰

ì´ë•Œ ê²€ì‚¬ í´ë˜ìŠ¤ëŠ” unittest.TestCaseë¥¼ ìƒì†ë°›ëŠ”ë‹¤ëŠ” ì ì„ ê¸°ì–µí•  ê²ƒ. ì•„ë˜ ì½”ë“œëŠ” ì£¼ì–´ì§„ í•¨ìˆ˜ê°€ 'hi'ë¼ëŠ” ì¸ìë¥¼ ë°›ì„ ê²½ìš° Trueë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” ê²ƒ

```
# ê²€ì‚¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤Œ
class checFunc(uniitest.TestCase):
    def test_arg(self):
        self.assertTrue(func('hi'))
```

unittest ëª¨ë“ˆì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” assert ë©”ì„œë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŒ.

assertEqual(a, b) -> a == b
assertNotEqual(a, b) -> a != b
assertTrue(x) -> bool(x) is True
assertFalse(x) -> a is b
assertisNot(a, b) -> a is not b
assertisNoe(x) -> x is None
assertisNotNone(x) => x is not None
assert(a, b) -> a in b
assertNotin(a, b) -> a not in b
assertIsInstance(a, b) -> isinstance(a, b)
assertNotIsInstance(a, b) -> not isinstance(a, b)

- unittest.main ìœ¼ë¡œ ì‹¤ì œ ê²€ì‚¬ ì‹¤í–‰í•˜ê¸°

ê²€ì‚¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë©´ ì´ë¥¼ ì‹¤í–‰í•´ì•¼ í•¨. ì‹¤í–‰ ë°©ë²•ì€ unittest.main()ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒ. ì´ë ‡ê²Œ ë˜ë©´ unittest.TestCaseë¥¼ ìƒì†ë°›ëŠ” ëª¨ë“  ê²€ì‚¬ í´ë˜ìŠ¤ì˜ assert ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©° ê²°ê³¼ë¥¼ ì¶œë ¥í•´ ì¤Œ.

```
if __name__ == '__main__':
    unittest.main()
```

- ì‘ìš©

```
import unittest
import string

def check_id(id_str):
    check_alphabet = False
    check_digit = False
    for letter in string.ascii_letters:
        if letter in id_str:
            check_alphabet = True

    for digit in string.digits:
        if digit in id_str:
            check_digit = True

    for punc in string.punctuation:
        if punc in id_str:
            return False

    for whitespace in string.whitespace:
        if whitespace in id_str:
            return False

    if all([check_alphabet, check_digit]):
        return True
    else:
        return False

class checkIdTest(unittest.TestCase):
    def test_hello123(self):
        self.assertTrue(check_id('hello123')) # ì •ìƒ

    def test_punc(self):
        self.assertFalse(check_id('hello123#!')) # íŠ¹ìˆ˜ë¬¸ìê°€ ìˆì–´ì„œ ê·œì¹™ ìœ„ë°°

    def test_type(self):
        self.assertIsInstance(check_id('hello123'), bool) ## ê²°ê³¼ íƒ€ì…ì€ ë¶€ìš¸

class checkIdTest2(unittest.TestCase):
    def test_whitespace(self):
        self.assertFalse(check_id('hello 123')) # ê³µë°±ì´ ìˆì–´ì„œ ê·œì¹™ ìœ„ë°°

if __name__ == '__main__':
    unittest.main()
```

ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ë©´ ëª‡ê°œë¥¼ í…ŒìŠ¤íŠ¸í–ˆëŠ”ì§€ ì–¼ë§ˆë‚˜ ê±¸ë ¸ëŠ”ì§€ ì•Œë ¤ì¤Œ. ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼ë˜ì—ˆë‹¤ë©´ OK ë©”ì‹œì§€ë¥¼ ì¶œë ¥. ì´ë•Œ '.'ì€ OKë¥¼ ì˜ë¯¸í•˜ë©° ê°œìˆ˜ëŠ” í…ŒìŠ¤íŠ¸ ê°œìˆ˜ë¥¼ ì˜ë¯¸í•¨.

ê²€ì‚¬ê°€ í†µê³¼ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ëª‡ ë²ˆì§¸ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆëŠ”ì§€ ê·¸ë¦¬ê³  ê·¸ ë‚´ìš©ì€ ë¬´ì—‡ì¸ì§€ ì•Œë ¤ì¤Œ. ì´ ë•Œ '.F..'ì€ ë‘ë²ˆì§¸ì—ì„œ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ê²ƒì„. ì°¸ê³ ë¡œ EëŠ” Errorë¥¼ ì˜ë¯¸í•¨.

## pytest ì‚¬ìš©ë²•

ì•„ë‚˜ì½˜ë‹¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìš°ì„  ì„¤ì¹˜ í•´ì¤Œ.

```
pip install pytest
```

ì¼ë‹¨ í‰ê· ì„ êµ¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ mymath.pyì— averageë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì¶”ê°€

```
def average(a):
    return sum(a) / len(a)
```

ìœ„ í•¨ìˆ˜ê°€ ì œëŒ€ë¡œ êµ¬í˜„ëëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶”ê°€í•¨. í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ í¬í•¨ëœ test_mymath.py ë¥¼ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•¨.

```
from mymath import *

def test_average():
    assert average([1, 2, 3]) == 2
```

í•¨ìˆ˜ì™€ ì´ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ê°€ ëª¨ë‘ ì¤€ë¹„ë¨. PyCharmaì—ì„œ í„°ë¯¸ë„ì„ í´ë¦­í•œ í›„ pytestë¼ê³  ì…ë ¥í•¨. ë‹¤ìŒê³¼ ê°™ì´ ìë™ìœ¼ë¡œ test\_ë¼ëŠ” ì ‘ë‘ì‚¬ë¡œ ì‹œì‘í•˜ëŠ” íŒŒì¼ ë˜ëŠ” \_testë¼ëŠ” ì ‘ë¯¸ì‚¬ë¡œ ëë‚˜ëŠ” íŒŒì¼ì„ ì°¾ì•„ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ í™”ë©´ì— ì¶œë ¥í•´ ì¤Œ. test_mymath.pyë‹¤ìŒì— .ì´ ìˆëŠ” ê²ƒì€ í•´ë‹¹ í…ŒìŠ¤íŠ¸ê°€ ì˜ í†µê³¼ ëìŒì„ ì˜ë¯¸í•¨.

ì¡°ê¸ˆ ë” ê²°ê³¼ë¥¼ ìì„¸íˆ ì¶œë ¥í•˜ë ¤ë©´ -v ì˜µì…˜ì„ ì‚¬ìš©

```
pytest -v
```

ì´ë²ˆì—ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì—¬ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ë„ë¡ í•´ë´„.
[1, 2, 3]ì˜ í‰ê· ì€ 2ì¸ë° ê¸°ëŒ“ê°’ì´ 1ì´ë¼ê³  ì½”ë”©í•œ ê²ƒ

```
from mymath import *

def test_average():
    assert average([1, 2, 3]) == 1
```

ë‹¤ì‹œ í„°ë¯¸ë„ì— pytestë¥¼ ì…ë ¥í•˜ë©´ ì´ë²ˆì—ëŠ” ê²°ê³¼ê°€ Fë¼ê³  ì¶œë ¥ë˜ê³  í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•œ ìœ„ì¹˜ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚¨.

### ğŸ“Œ ì°¸ê³  ë¸”ë¡œê·¸

<br>

[íŒŒì´ì¬ pytest](https://wikidocs.net/80337)

[íŒŒì´ì¬ unittest](https://zephyrus1111.tistory.com/338)
