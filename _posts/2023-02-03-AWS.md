---
layout: post
title: AWS - Lightsail
tags: [AWS, Lightsail]
categories:
  - AWS
date: 2023-02-03
---

## AWS -Lightsail

AWS 가입은 이미 된 상태. 가입 중 이슈로 저녁에 가입했을 때 카드가 인증이 제대로 안됐음. 그 때 당시 상황의 문제인지 진짜 저녁에 가입해서 그런건지 모르겠지만 다음날 하니까 잘 됨. EC2랑 Lightsail 고민하다가 일단 포트폴리오 배포용으로 Lightsail해보고 DB까지 연결해서 프로젝트 배포할 때 EC2 사용해 보기로 함.(그냥 혼자 그렇게 정해봄..🙂)

### 인스턴스 위치 선택

리전 : 서울

- 서울은 가용 영역이 4개 있음. 만약 여러 서비스를 운영한다면 각자 다른 영역에 인스턴스를 생성해주는 것이 좋음.
- 만약 A영역에 장애가 발생한다면 A영역에서 사용하는 서비스에 장애가 발생하게 됨. 하지만 다른 서비스를 다른 영역에 분산 배포했다면 모든 서비스가 장애를 받지 않을 수 있음.

### 인스턴스 이미지(OS 세팅) 선택

선택 가능한 이미지로는 Linux/Unix 계열과 MS의 윈도우 계열이 있음. 윈도우는 라이센스 관련 요금이 리눅스보다 더 비쌈. (리눅스로 연습해보고 싶어서 리눅스 선택!)

#### OS 전용

- 플랫폼 Linux/Unix 선택(리눅스로 연습해보고 싶어서 리눅스 선택!)
- 블루프린트 Ubuntu(20.04 LTS)선택 (우분투도 연습!)

### 인스턴스 보안을 위한 키페어 생성

SSH키 페어 변경 -> 새로 생성 + -> 이름 작명 -> 키페어 생성 -> 프라이빗 키 다운로드(보관해둘 것)

### 가격

일단 제일 저렴한 걸로 해둠(3.5 달러였나.. 지금 프리티어 기간이나 돈 안나갈껄..? 안나가겠지?😭)

### 인스턴스 생성 마무리

인스턴스 이름 지정(그냥 작명하는 듯). 갯수에는 생성할 인스턴스 갯수(프로젝트 배포 1개 할거니까 1개하면 됨) -> 인스턴스 생성 클릭!

### 인스턴스 고정IP / 방화벽 설정

인스턴스에서 메뉴 -> 관리 -> 네트워킹 -> 퍼블릭 IP(난 일단 고정 IP생성 해 줌. 고정 안해 두면 끌 때마다 IP주소 바뀌는 듯. 도메인 안샀으니까 일단 고정으로! 고정으로 안해두면 IP 주소 계속 유동으로 바뀌어서 돈 청구된다고 함!) -> IPv4 방화벽 -> IP 주소로 제한 부분에 체크하면 모바엑스텀에서 버서 안 열림.(블로그에서 IP 주소로 제한 체크해놔서 했는데 이렇게 해두니까 모바엑스텀에서 제대로 실행이 안되서 헤맴. 이 부분 체크 해제 하니까 잘 실행 됨!)  
모바엑스텀에서 SSH -> Remote host에 퍼블릭 IP 주소 써줌. Specify username -> Lightsail에서 지정해 둔 사용자 이름 맞춰서 써주기. Use private Key 체크하고 다운받은 프라이빗 키 넣어주기!

### 모바엑스텀 명령어

웹서비스가 잘 가동되는지 확인(우분투 기준)

```
$ sudo -s #루트 권한 얻기
$ apt-get update
$ sudo pat-get install apache2 #아파치 서버 설치
$ service appache2 start #아파치 서버 시작
```

이렇게 명령어 친 후 ip주소 들어갔을 때 잘 연결 됐으면 Apache2 Ubuntu Default Page가 뜸.

\* MobaXterm(모바엑스텀) 이란?  
SSH, RDP, SFTP 등 다양한 네트워크 클라이언트와 터미널을 제공하는 툴. 다른 네트워크 클라이언트 프로그램에 비해 훨씬 강렬하고 편리한 세션 연결을 지원함. 현존하는 최강의 SSH 접속 툴이라고 함...ㅎ  
쉽게 이해하자면 리눅스에 Telnet, SSH 접속을 위해서는 Putty, XShell을 깔고 FPT/SFTP 접속을 위해 FileZilla를 깔고, 그 외 다양한 원격 접속용 프로그램을 여러개 설치하여 관리해야 하는데 많이 복잡해지고 번거로워 짐.
MobaXterm은 익숙한 UI와 다양한 접속 방식 지원으로 설정이 편하고 별도의 SFTP프로그램 등을 설치하지 않아도 됨. 보안키도 putty로 ppk 변환하지 않고 .key 또는 .pem 그대로 사용할 수 있음. 터미널 화면 좌측에 윈도우 탐색 창처럼 현재 경로의 폴더와 파일들을 보여 주기도 해서 일종의 코트 에디터 처럼 생겨서 친숙함.  
MobaXterm은 SSSH, Telnet, Rsh, Xdmcp, RDP, VNC, FTP, SFTP, Serial, File, Shell, Brower 등 다양한 접속방식과 네트워크 클라이언트 터미널을 제공하며, 다른 네트워크 클라이언트 프로그램들에 비해 훨씬 강력하고 편리한 세션 연결을 지원함. (쟤네가 다 뭔지 아직은 모르겠지만 언젠간 알아놔야겠다🧐)  
!!MobaXterm은 Windows용만 있어서 맥북에서는 사용할 수 없다고 함!!

### 📌 참고 블로그

[Lightsail 적용하기](https://inpa.tistory.com/entry/mobaxterm-%f0%9f%92%bd-%eb%aa%a8%eb%b0%94%ec%97%91%ec%8a%a4%ed%85%80-%ec%84%a4%ec%b9%98-%ed%95%9c%ea%b8%80%ed%99%94-ssh-%ec%a0%91%ec%86%8d-%eb%b0%a9%eb%b2%95-%f0%9f%92%af-%ec%a0%95%eb%a6%ac)

[모바엑스텀설치 및 방법](https://inpa.tistory.com/entry/mobaxterm-%f0%9f%92%bd-%eb%aa%a8%eb%b0%94%ec%97%91%ec%8a%a4%ed%85%80-%ec%84%a4%ec%b9%98-%ed%95%9c%ea%b8%80%ed%99%94-ssh-%ec%a0%91%ec%86%8d-%eb%b0%a9%eb%b2%95-%f0%9f%92%af-%ec%a0%95%eb%a6%ac)
