---
layout: post
title: JWTλ€? 2νƒ„!
tags: [server]
categories:
  - server
date: 2023-06-06
---

## JWTμ μ¥λ‹¨μ 

### - μ¥μ 

π‘πΌ JWT μμ²΄κ°€ μ΄λ―Έ μΈμ¦λ μ •λ³΄μ΄κΈ° λ•λ¬Έμ— μ΄λ¥Ό μ €μ¥ν•κΈ° μ„ν• μ €μ¥μ†λ¥Ό λ”°λ΅ ν•„μ”λ΅ ν•μ§€ μ•μ. λ•λ¬Έμ— μΈμ¦μ„λ²„κ°€ ν„°μ Έμ„ λ‹¤λ¥Έ μ„λΉ„μ¤λ¥Ό λ¨λ‘ λ» μ“°κ² λλ” λ“±μ μΌμ„ κ±±μ •ν•μ§€ μ•μ•„λ„ λ¨

π‘πΌ μ„Έμ…κ³Ό κ°™μ΄ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈ μƒνƒλ¥Ό μ €μ¥ν•΄ λ‘ ν•„μ”κ°€ μ—†μ.

π‘πΌ μ•”νΈν™”ν• μ‹κ·Έλ‹μ³λ¥Ό ν†µν•΄ μ„λ³€μ΅°λ¥Ό μ‰½κ² μ• μ μκΈ° λ•λ¬Έμ— λ³΄μ•μ„±μ΄ μΆ‹μ.

π‘πΌ JSONμ΄λΌλ” ν•νƒλ΅ μ΅΄μ¬ν•κΈ° λ•λ¬Έμ— λ²”μ©μ„±μ΄ μΆ‹μ.

<br>

### - λ‹¨μ 

π‘πΌ ν† ν°μ„ κ°•μ λ΅ λ§λ£μ‹ν‚¬ λ°©λ²•μ΄ μ—†μ. λ•λ¬Έμ— ν‚¤λ¥Ό κ°™μ΄ νƒμ·¨λ‹Ήν•κ±°λ‚ μ•”νΈν™”κ°€ ν’€λ¦¬λ©΄ μ΄λ¥Ό μμµν•λ” κ³Όμ •μ΄ λ²κ±°λ΅μ΄ νΈ

π‘πΌ ν—¤λ”μ™€ νμ΄λ΅λ“ λ¶€λ¶„μ€ λ³„λ‹¤λ¥Έ μ•”νΈν™” μ—†μ΄ κ·Έλƒ¥ base64 μΈμ½”λ”© λμ–΄μμ–΄μ„ νμ΄λ΅λ“μ— λ―Όκ°ν• μ •λ³΄λ¥Ό λ‹΄κΈ° μ–΄λ ¤μ›€.

## μ•”νΈν™” μ•κ³ λ¦¬μ¦

sign ν•¨μλ” μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ μ„λ…μ— μ“°μΌ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„ λ”°λ΅ μ§€μ •ν•΄μ£Όμ§€ μ•λ”λ‹¤λ©΄ κΈ°λ³Έμ μΌλ΅ SHA256μ΄λ€ μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ μ„λ…λ¨. μ΄ μ•κ³ λ¦¬μ¦μ€ μ•”νΈν™”μ™€ λ³µνΈν™”μ— μ“°μ΄λ” ν‚¤κ°€ λ™μΌν• λ€μΉ­ μ•κ³ λ¦¬μ¦μ„.

μ•κ³ λ¦¬μ¦μ„ λ”°λ΅ μ§€μ •ν•΄μ£Όμ§€ μ•μ•λ”λ° ν† ν° μ•”νΈν™”μ— μ“°μΈ ν‚¤λ¥Ό νƒμ·¨λ‹Ήν•λ‹¤λ©΄ λ³΄μ•μ΄ λ«λ¦¬κ² λ¨.

μ΄λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ λΉ„λ€μΉ­ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•΄μ„ ν† ν°μ„ λ°κΈ‰ ν•  μ μμ

β… SHA256 μ•κ³ λ¦¬μ¦

HSA256(Secure Hash Algorithm256-bit)μ€ κ³ μ ν• ν•΄μ‹ κ°’μ„ μƒμ„±ν•κΈ° μ„ν•΄ μ‚¬μ©λλ” μ•κ³ λ¦¬μ¦μ„. μ΄λ” λ°μ΄ν„°μ λ¬΄κ²°μ„±μ„ κ²€μ‚¬ν•λ”λ° μ£Όλ΅ μ‚¬μ©λλ©°, λ°μ΄ν„°μ μ‘μ€ λ³€ν™”μ—λ„ λ‹¤λ¥Έ ν•΄μ‹ κ°’μ΄ μƒμ„±λκΈ° λ•λ¬Έμ— μ¶©λμ΄ λ§¤μ° λ“λ¬Όκ² λ°μƒν•¨. SHA256μ€ μΌλ°μ μΌλ΅ μ•”νΈν™”, λ””μ§€ν„Έ μ„λ…, μΈμ¦ λ“± λ‹¤μ–‘ν• λ³΄μ• κ΄€λ ¨ μ‘μ—…μ— μ μ©λ¨.

β… HS256 μ•κ³ λ¦¬μ¦

HS256μ€ HMAC (Hash-based Message Authentication Code)μ„ μ‚¬μ©ν•μ—¬ SHA256μ„ μ μ©ν• μ•κ³ λ¦¬μ¦μ„. HMACμ€ λ©”μ‹μ§€ λ¬΄κ²°μ„±μ„ κ²€μ¦ν•κΈ° μ„ν•΄ μ‚¬μ©λλ” μ•”νΈν™” κΈ°λ²•μΌλ΅, κ³µμ λ λΉ„λ°€ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€μ— λ€ν• μΈμ¦ νƒκ·Έλ¥Ό μƒμ„±ν•¨. HS256μ€ JWT (JSON Web Tokens)μ μ„λ… μ•κ³ λ¦¬μ¦μΌλ΅ μμ£Ό μ‚¬μ©λ¨.  
JWTμ header.payload λ¶€λ¶„μ„ λ‘κ°™μ€ λΉ„λΉν‚¤λ΅ μ„±λ…ν• ν›„ κ°™μ€μ§€ λΉ„κµν•λ” λ°©μ‹μΌλ΅ ν† ν°μ„ κ²€μ¦.

- HMAC μ•κ³ λ¦¬μ¦μ€ λ€μΉ­ν‚¤ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„

<br>

β… RS256 μ•κ³ λ¦¬μ¦

RSA(Rivest-Shamir-Adleman) μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ” JWTμ μ„λ… μ•κ³ λ¦¬μ¦ μ¤‘ ν•λ‚.

RSA μ•κ³ λ¦¬μ¦μ€ λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„.
κ³µκ°ν‚¤(public key)μ™€ κ°μΈν‚¤(private key) ν• μμ„ μ‚¬μ©ν•μ—¬ μ•”νΈν™” λ° λ³µνΈν™”λ¥Ό μν–‰ν•¨.

κ°μΈν‚¤λ” μ„λ…ν•κΈ° μ„ν•΄ μ‚¬μ©λλ” keyμ΄κ³  κ³µκ°ν‚¤λ” μ„λ…λ λ‚΄μ©μ„ κ²€μ¦ν•λ”λ° μ‚¬μ©ν•¨. λ”°λΌμ„ κ°μΈν‚¤λ” authentication μ„λ²„μ—μ„λ§ κ°€μ§€κ³  μκ³ , μ΄ μ„λ²„μ—μ„λ§ JWT ν† ν°μ„ μƒμ„±ν•λ©΄ λκΈ° λ•λ¬Έμ— κ°μΈν‚¤λ¥Ό κ³µμ ν•  ν•„μ”κ°€ μ—†μ.

μ΄ μ„λ…μ„ κ²€μ¦ν•κΈ° μ„ν•΄μ„λ” μ™Έλ¶€μ— κ³µκ°λλ„ λλ” κ³µκ°ν‚¤λ§ μ‚¬μ©ν•λ©΄ λμ§€ λ•λ¬Έμ— λ³΄μ•μ μΌλ΅ λΉ„κµμ  μ•μ „ν•¨.

- λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” μ•κ³ λ¦¬μ¦ νΉμ§•
  - κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν• κ²ƒμ€ κ°μΈν‚¤λ΅ λ³µνΈν™” κ°€λ¥('λ°μ΄ν„° μ•”νΈν™”' κΈ°λ¥)
  - κ°μΈν‚¤λ΅ μ•”νΈν™” ν• κ²ƒμ€ κ³µκ°ν‚¤λ΅ λ³µνΈν™” κ°€λ¥('μ „μμ„λ…' κΈ°λ¥)

<br>

## JWTμ λ™μ‘ λ°©μ‹

JWTλ” κΈ°λ³Έμ μΌλ΅ IdPμ—μ„ νΉμ • μ μ €μ identityλ¥Ό μ¦λ…ν•κΈ° μ„ν•΄ μ„±μ„±λ¨. μΈμ¦ μ μ°¨λ” μ•„λμ™€ κ°™μ

- μ μ €κ°€ μμ‹ μ ID/PW λ¥Ό μ…λ ¥ν•΄ λ΅κ·ΈμΈν•¨.

- authentication μ„λ²„λ” credentialμ„ κ²€μ¦ν•κ³ , μ •λ³΄κ°€ λ§λ‹¤λ©΄ μ„λ…λ JWTλ¥Ό λ°κΈ‰ν•¨. (secret(HS256) μ΄λ‚ private key(RS256) λ¥Ό μ‚¬μ©ν•΄ μ„λ…)

- μ μ € ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—μ„ μκΈ° μμ‹ μ μμ›(access protected)μ— μ ‘κ·Όν•κΈ° μ„ν•΄ JWTλ¥Ό HTTP Authorization Headerμ— λ‹΄μ•„ λ³΄λƒ„.

- μ„λ²„λ” ν† ν°μ authenticityλ¥Ό public key(RS256)μ΄λ‚ secret(HS256)λ¥Ό ν™μ©ν•΄ ν† ν°μ authenticityλ¥Ό κ²€μ¦ν•¨.

<br>

### π“ μ°Έκ³  λΈ”λ΅κ·Έ

<br>

[JWTλ¥Ό λΉ„λ€μΉ­ μ•”νΈν™” μ•κ³ λ¦¬μ¦(RSA, ECDSA)μΌλ΅ μ•”νΈν™” ν•κΈ°](https://velog.io/@wksh229/JWT%EB%A5%BC-RSA-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%9C%BC%EB%A1%9C-%EC%95%94%ED%98%B8%ED%99%94-%ED%95%98%EA%B8%B0)

[[JWT]JWTλ€ λ¬΄μ—‡μΈκ°€?(JSON Web Token) μ‰½κ² μ •λ¦¬ν• core κ°λ…λ“¤](https://etloveguitar.tistory.com/101)

[RS256, HS256 μ°¨μ΄](https://hwannny.tistory.com/72)

[JWT ν† ν° μ•”νΈν™” μ•κ³ λ¦¬μ¦ - HS256κ³Ό RS256](https://velog.io/@ddangle/JWT-%ED%86%A0%ED%81%B0-%EC%95%94%ED%98%B8%ED%99%94-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-HS256%EA%B3%BC-RS256)
